pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                cleanWs()
                script {
                    sh 'git clone https://github.com/AlexBaily/KitchenHelper-Android.git'
                    sh 'cd KitchenHelper-Android'
                    sh 'pwd'
                    sh './gradlew check'
                }
            }
        }
        stage('UnitTest') {
            steps {
                script {
                    sh './gradlew clean test'
                }
            }
        }
        stage('Build-APK') {
            steps {
                script {
                    sh '/.gradlew assembleDebug assembleRelease'
                } 
            }
        }
    }
}
